From 1420d0496d04cc0e83c6a12b9ee3d049466761b3 Mon Sep 17 00:00:00 2001
From: Basil Chew <basil.chew@intel.com>
Date: Fri, 29 Nov 2019 22:13:01 +0800
Subject: [PATCH 04/13] Add default config files for whl

---
 hypervisor/arch/x86/configs/whl-ipc-i5.config |   8 ++
 .../arch/x86/configs/whl-ipc-i5/board.c       |  46 ++++++++
 .../arch/x86/configs/whl-ipc-i5/misc_cfg.h    |  35 ++++++
 .../arch/x86/configs/whl-ipc-i5/pci_devices.h |  63 +++++++++++
 .../arch/x86/configs/whl-ipc-i5/ve820.c       |  16 +++
 .../configs/whl-ipc-i5/whl-ipc-i5_acpi_info.h | 103 ++++++++++++++++++
 hypervisor/arch/x86/configs/whl-ipc-i7.config |   8 ++
 .../arch/x86/configs/whl-ipc-i7/board.c       |  50 +++++++++
 .../arch/x86/configs/whl-ipc-i7/misc_cfg.h    |  35 ++++++
 .../arch/x86/configs/whl-ipc-i7/pci_devices.h |  63 +++++++++++
 .../arch/x86/configs/whl-ipc-i7/ve820.c       |  16 +++
 .../configs/whl-ipc-i7/whl-ipc-i7_acpi_info.h | 103 ++++++++++++++++++
 12 files changed, 546 insertions(+)
 create mode 100644 hypervisor/arch/x86/configs/whl-ipc-i5.config
 create mode 100644 hypervisor/arch/x86/configs/whl-ipc-i5/board.c
 create mode 100644 hypervisor/arch/x86/configs/whl-ipc-i5/misc_cfg.h
 create mode 100644 hypervisor/arch/x86/configs/whl-ipc-i5/pci_devices.h
 create mode 100644 hypervisor/arch/x86/configs/whl-ipc-i5/ve820.c
 create mode 100644 hypervisor/arch/x86/configs/whl-ipc-i5/whl-ipc-i5_acpi_info.h
 create mode 100644 hypervisor/arch/x86/configs/whl-ipc-i7.config
 create mode 100644 hypervisor/arch/x86/configs/whl-ipc-i7/board.c
 create mode 100644 hypervisor/arch/x86/configs/whl-ipc-i7/misc_cfg.h
 create mode 100644 hypervisor/arch/x86/configs/whl-ipc-i7/pci_devices.h
 create mode 100644 hypervisor/arch/x86/configs/whl-ipc-i7/ve820.c
 create mode 100644 hypervisor/arch/x86/configs/whl-ipc-i7/whl-ipc-i7_acpi_info.h

diff --git a/hypervisor/arch/x86/configs/whl-ipc-i5.config b/hypervisor/arch/x86/configs/whl-ipc-i5.config
new file mode 100644
index 000000000..de36e9f96
--- /dev/null
+++ b/hypervisor/arch/x86/configs/whl-ipc-i5.config
@@ -0,0 +1,8 @@
+
+# New board kconfig generated by vm config tool
+# Modified by Kconfiglib (https://github.com/ulfalizer/Kconfiglib)
+
+CONFIG_BOARD="whl-ipc-i5"
+CONFIG_SERIAL_LEGACY=y
+CONFIG_HV_RAM_START=0x1000000
+CONFIG_HV_RAM_SIZE=0x9600000
diff --git a/hypervisor/arch/x86/configs/whl-ipc-i5/board.c b/hypervisor/arch/x86/configs/whl-ipc-i5/board.c
new file mode 100644
index 000000000..c870288cf
--- /dev/null
+++ b/hypervisor/arch/x86/configs/whl-ipc-i5/board.c
@@ -0,0 +1,46 @@
+/*
+ * Copyright (C) 2019 Intel Corporation. All rights reserved.
+ *
+ * SPDX-License-Identifier: BSD-3-Clause
+ */
+
+/*
+ * BIOS Information
+ * Vendor: American Megatrends Inc.
+ * Version: WL10R104
+ * Release Date: 09/12/2019
+ * BIOS Revision: 5.13
+ *
+ * Base Board Information
+ * Manufacturer: Maxtang
+ * Product Name: WL10
+ * Version: V1.0
+ */
+
+#include <board.h>
+#include <acrn_common.h>
+#include <msr.h>
+
+struct platform_clos_info platform_clos_array[0];
+uint16_t platform_clos_num = 0;
+
+static const struct cpu_cx_data board_cpu_cx[3] = {
+	{{SPACE_FFixedHW, 0x01U, 0x02U, 0x01U, 0x00UL}, 0x01U, 0x01U, 0x00U},	/* C1 */
+	{{SPACE_FFixedHW, 0x01U, 0x02U, 0x01U, 0x33UL}, 0x02U, 0x97U, 0x00U},	/* C2 */
+	{{SPACE_FFixedHW, 0x01U, 0x02U, 0x01U, 0x60UL}, 0x03U, 0x40AU, 0x00U},	/* C3 */
+};
+
+static const struct cpu_px_data board_cpu_px[6] = {
+	{0xBB9UL, 0x00UL, 0x0AUL, 0x0AUL, 0x002700UL, 0x002700UL},	/* P0 */
+	{0xBB8UL, 0x00UL, 0x0AUL, 0x0AUL, 0x001E00UL, 0x001E00UL},	/* P1 */
+	{0x708UL, 0x00UL, 0x0AUL, 0x0AUL, 0x001200UL, 0x001200UL},	/* P2 */
+	{0x640UL, 0x00UL, 0x0AUL, 0x0AUL, 0x001000UL, 0x001000UL},	/* P3 */
+	{0x5DCUL, 0x00UL, 0x0AUL, 0x0AUL, 0x000F00UL, 0x000F00UL},	/* P4 */
+	{0x3E8UL, 0x00UL, 0x0AUL, 0x0AUL, 0x000A00UL, 0x000A00UL},	/* P5 */
+};
+
+const struct cpu_state_table board_cpu_state_tbl = {
+	"Intel(R) Core(TM) i5-8265U CPU @ 1.60GHz",
+	{(uint8_t)ARRAY_SIZE(board_cpu_px), board_cpu_px,
+	(uint8_t)ARRAY_SIZE(board_cpu_cx), board_cpu_cx}
+};
diff --git a/hypervisor/arch/x86/configs/whl-ipc-i5/misc_cfg.h b/hypervisor/arch/x86/configs/whl-ipc-i5/misc_cfg.h
new file mode 100644
index 000000000..1c46518b6
--- /dev/null
+++ b/hypervisor/arch/x86/configs/whl-ipc-i5/misc_cfg.h
@@ -0,0 +1,35 @@
+/*
+ * Copyright (C) 2019 Intel Corporation. All rights reserved.
+ *
+ * SPDX-License-Identifier: BSD-3-Clause
+ */
+
+
+#ifndef MISC_CFG_H
+#define MISC_CFG_H
+
+#define CONFIG_MAX_PCPU_NUM	4U
+#define ROOTFS_0		"root=/dev/nvme0n1p3 "
+#define ROOTFS_1		"root=/dev/sda3 "
+
+#define SOS_ROOTFS		"root=/dev/sda3 "
+#define SOS_CONSOLE		"console=ttyS0 "
+#define SOS_COM1_BASE		0x3F8U
+#define SOS_COM1_IRQ		4U
+#define SOS_COM2_BASE		0x2F8U
+#define SOS_COM2_IRQ		3U
+
+#define SOS_BOOTARGS_DIFF	"rw " \
+				"rootwait "	\
+				"console=tty0 "	\
+				"consoleblank=0 "	\
+				"no_timer_check "	\
+				"quiet "	\
+				"loglevel=3 "	\
+				"i915.nuclear_pageflip=1 "	\
+				"i915.avail_planes_per_pipe=0x01010F "	\
+				"i915.domain_plane_owners=0x011111110000 "	\
+				"i915.enable_gvt=1 "	\
+				"hvlog=2M@0x1fe00000 "	\
+				"memmap=0x200000$0x1fe00000"
+#endif /* MISC_CFG_H */
diff --git a/hypervisor/arch/x86/configs/whl-ipc-i5/pci_devices.h b/hypervisor/arch/x86/configs/whl-ipc-i5/pci_devices.h
new file mode 100644
index 000000000..90981f624
--- /dev/null
+++ b/hypervisor/arch/x86/configs/whl-ipc-i5/pci_devices.h
@@ -0,0 +1,63 @@
+/*
+ * Copyright (C) 2019 Intel Corporation. All rights reserved.
+ *
+ * SPDX-License-Identifier: BSD-3-Clause
+ */
+
+/*
+ * BIOS Information
+ * Vendor: American Megatrends Inc.
+ * Version: WL10R104
+ * Release Date: 09/12/2019
+ * BIOS Revision: 5.13
+ *
+ * Base Board Information
+ * Manufacturer: Maxtang
+ * Product Name: WL10
+ * Version: V1.0
+ */
+
+#ifndef PCI_DEVICES_H_
+#define PCI_DEVICES_H_
+
+#define HOST_BRIDGE                             .pbdf.bits = {.b = 0x00U, .d = 0x00U, .f = 0x00U}
+#define VGA_COMPATIBLE_CONTROLLER_0             .pbdf.bits = {.b = 0x00U, .d = 0x02U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa0000000UL, \
+                                                .vbar_base[2] = 0x90000000UL
+#define SIGNAL_PROCESSING_CONTROLLER_0          .pbdf.bits = {.b = 0x00U, .d = 0x12U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa141e000UL
+#define USB_CONTROLLER_0                        .pbdf.bits = {.b = 0x00U, .d = 0x14U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa1400000UL
+#define RAM_MEMORY_0                            .pbdf.bits = {.b = 0x00U, .d = 0x14U, .f = 0x02U}, \
+                                                .vbar_base[0] = 0xa1416000UL, \
+                                                .vbar_base[2] = 0xa141d000UL
+#define COMMUNICATION_CONTROLLER_0              .pbdf.bits = {.b = 0x00U, .d = 0x16U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa141c000UL
+#define SATA_CONTROLLER_0                       .pbdf.bits = {.b = 0x00U, .d = 0x17U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa1414000UL, \
+                                                .vbar_base[1] = 0xa141b000UL, \
+                                                .vbar_base[5] = 0xa141a000UL
+#define SD_HOST_CONTROLLER_0                    .pbdf.bits = {.b = 0x00U, .d = 0x1AU, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa1419000UL
+#define PCI_BRIDGE_0                            .pbdf.bits = {.b = 0x00U, .d = 0x1CU, .f = 0x00U}
+#define PCI_BRIDGE_1                            .pbdf.bits = {.b = 0x00U, .d = 0x1CU, .f = 0x04U}
+#define PCI_BRIDGE_2                            .pbdf.bits = {.b = 0x00U, .d = 0x1DU, .f = 0x00U}
+#define PCI_BRIDGE_3                            .pbdf.bits = {.b = 0x00U, .d = 0x1DU, .f = 0x01U}
+#define ISA_BRIDGE_0                            .pbdf.bits = {.b = 0x00U, .d = 0x1FU, .f = 0x00U}
+#define AUDIO_DEVICE_0                          .pbdf.bits = {.b = 0x00U, .d = 0x1FU, .f = 0x03U}, \
+                                                .vbar_base[0] = 0xa1410000UL, \
+                                                .vbar_base[4] = 0xa1000000UL
+#define SMBUS_0                                 .pbdf.bits = {.b = 0x00U, .d = 0x1FU, .f = 0x04U}, \
+                                                .vbar_base[0] = 0xa1418000UL
+#define SERIAL_BUS_CONTROLLER_0                 .pbdf.bits = {.b = 0x00U, .d = 0x1FU, .f = 0x05U}, \
+                                                .vbar_base[0] = 0xfe010000UL
+#define NON_VOLATILE_MEMORY_CONTROLLER_0        .pbdf.bits = {.b = 0x02U, .d = 0x00U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa1300000UL
+#define ETHERNET_CONTROLLER_0                   .pbdf.bits = {.b = 0x03U, .d = 0x00U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa1200000UL, \
+                                                .vbar_base[3] = 0xa1220000UL
+#define ETHERNET_CONTROLLER_1                   .pbdf.bits = {.b = 0x04U, .d = 0x00U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa1100000UL, \
+                                                .vbar_base[3] = 0xa1120000UL
+
+#endif /* PCI_DEVICES_H_ */
diff --git a/hypervisor/arch/x86/configs/whl-ipc-i5/ve820.c b/hypervisor/arch/x86/configs/whl-ipc-i5/ve820.c
new file mode 100644
index 000000000..2d0e18a8a
--- /dev/null
+++ b/hypervisor/arch/x86/configs/whl-ipc-i5/ve820.c
@@ -0,0 +1,16 @@
+/*
+ * Copyright (C) 2019 Intel Corporation. All rights reserved.
+ *
+ * SPDX-License-Identifier: BSD-3-Clause
+ */
+
+#include <e820.h>
+#include <vm.h>
+/**
+ * @pre vm != NULL
+*/
+void create_prelaunched_vm_e820(struct acrn_vm *vm)
+{
+	vm->e820_entry_num = 0;
+	vm->e820_entries = NULL;
+}
diff --git a/hypervisor/arch/x86/configs/whl-ipc-i5/whl-ipc-i5_acpi_info.h b/hypervisor/arch/x86/configs/whl-ipc-i5/whl-ipc-i5_acpi_info.h
new file mode 100644
index 000000000..f6416d405
--- /dev/null
+++ b/hypervisor/arch/x86/configs/whl-ipc-i5/whl-ipc-i5_acpi_info.h
@@ -0,0 +1,103 @@
+/*
+ * Copyright (C) 2019 Intel Corporation. All rights reserved.
+ *
+ * SPDX-License-Identifier: BSD-3-Clause
+ */
+
+/* DO NOT MODIFY THIS FILE UNLESS YOU KNOW WHAT YOU ARE DOING!
+ */
+
+#ifndef PLATFORM_ACPI_INFO_H
+#define PLATFORM_ACPI_INFO_H
+
+/*
+ * BIOS Information
+ * Vendor: American Megatrends Inc.
+ * Version: WL10R104
+ * Release Date: 09/12/2019
+ * BIOS Revision: 5.13
+ *
+ * Base Board Information
+ * Manufacturer: Maxtang
+ * Product Name: WL10
+ * Version: V1.0
+ */
+
+/* pm sstate data */
+#define PM1A_EVT_ADDRESS        0x1800UL
+#define PM1A_EVT_ACCESS_SIZE    0x2U
+#define PM1A_CNT_ADDRESS        0x1804UL
+	/* S3 is not supported by BIOS */
+
+#undef S3_PKG_VAL_PM1A
+#define S3_PKG_VAL_PM1A         0x0U
+
+#define WAKE_VECTOR_32          0x8C8AA08CUL
+#define WAKE_VECTOR_64          0x8C8AA098UL
+
+#define RESET_REGISTER_ADDRESS  0xCF9UL
+#define RESET_REGISTER_SPACE_ID SPACE_SYSTEM_IO
+#define RESET_REGISTER_VALUE    0x6U
+
+/* DRHD of DMAR */
+
+#define DRHD_COUNT              2U
+
+#define DRHD0_DEV_CNT           1U
+#define DRHD0_SEGMENT           0U
+#define DRHD0_FLAGS             0U
+#define DRHD0_REG_BASE          0xFED90000UL
+#define DRHD0_IGNORE            true
+#define DRHD0_DEVSCOPE0_BUS     0x0U
+#define DRHD0_DEVSCOPE0_PATH    0x10U
+#define DRHD0_DEVSCOPE1_BUS     0x0U
+#define DRHD0_DEVSCOPE1_PATH    0x0U
+#define DRHD0_DEVSCOPE2_BUS     0x0U
+#define DRHD0_DEVSCOPE2_PATH    0x0U
+#define DRHD0_DEVSCOPE3_BUS     0x0U
+#define DRHD0_DEVSCOPE3_PATH    0x0U
+
+#define DRHD1_DEV_CNT           2U
+#define DRHD1_SEGMENT           0U
+#define DRHD1_FLAGS             1U
+#define DRHD1_REG_BASE          0xFED91000UL
+#define DRHD1_IGNORE            false
+#define DRHD1_DEVSCOPE0_BUS     0x0U
+#define DRHD1_DEVSCOPE0_PATH    0xf7U
+#define DRHD1_DEVSCOPE1_BUS     0x0U
+#define DRHD1_DEVSCOPE1_PATH    0xf6U
+#define DRHD1_DEVSCOPE2_BUS     0x0U
+#define DRHD1_DEVSCOPE2_PATH    0x0U
+#define DRHD1_DEVSCOPE3_BUS     0x0U
+#define DRHD1_DEVSCOPE3_PATH    0x0U
+#define DRHD1_IOAPIC_ID         2U
+
+#define DRHD2_DEV_CNT           0U
+#define DRHD2_SEGMENT           0U
+#define DRHD2_FLAGS             0U
+#define DRHD2_REG_BASE          0x00UL
+#define DRHD2_IGNORE            false
+#define DRHD2_DEVSCOPE0_BUS     0x0U
+#define DRHD2_DEVSCOPE0_PATH    0x0U
+#define DRHD2_DEVSCOPE1_BUS     0x0U
+#define DRHD2_DEVSCOPE1_PATH    0x0U
+#define DRHD2_DEVSCOPE2_BUS     0x0U
+#define DRHD2_DEVSCOPE2_PATH    0x0U
+#define DRHD2_DEVSCOPE3_BUS     0x0U
+#define DRHD2_DEVSCOPE3_PATH    0x0U
+
+#define DRHD3_DEV_CNT           0U
+#define DRHD3_SEGMENT           0U
+#define DRHD3_FLAGS             0U
+#define DRHD3_REG_BASE          0x00UL
+#define DRHD3_IGNORE            false
+#define DRHD3_DEVSCOPE0_BUS     0x0U
+#define DRHD3_DEVSCOPE0_PATH    0x0U
+#define DRHD3_DEVSCOPE1_BUS     0x0U
+#define DRHD3_DEVSCOPE1_PATH    0x0U
+#define DRHD3_DEVSCOPE2_BUS     0x0U
+#define DRHD3_DEVSCOPE2_PATH    0x0U
+#define DRHD3_DEVSCOPE3_BUS     0x0U
+#define DRHD3_DEVSCOPE3_PATH    0x0U
+
+#endif /* PLATFORM_ACPI_INFO_H */
diff --git a/hypervisor/arch/x86/configs/whl-ipc-i7.config b/hypervisor/arch/x86/configs/whl-ipc-i7.config
new file mode 100644
index 000000000..829259b44
--- /dev/null
+++ b/hypervisor/arch/x86/configs/whl-ipc-i7.config
@@ -0,0 +1,8 @@
+
+# New board kconfig generated by vm config tool
+# Modified by Kconfiglib (https://github.com/ulfalizer/Kconfiglib)
+
+CONFIG_BOARD="whl-ipc-i7"
+CONFIG_SERIAL_LEGACY=y
+CONFIG_HV_RAM_START=0x40400000
+CONFIG_HV_RAM_SIZE=0x9600000
diff --git a/hypervisor/arch/x86/configs/whl-ipc-i7/board.c b/hypervisor/arch/x86/configs/whl-ipc-i7/board.c
new file mode 100644
index 000000000..bd896e9ad
--- /dev/null
+++ b/hypervisor/arch/x86/configs/whl-ipc-i7/board.c
@@ -0,0 +1,50 @@
+/*
+ * Copyright (C) 2019 Intel Corporation. All rights reserved.
+ *
+ * SPDX-License-Identifier: BSD-3-Clause
+ */
+
+/*
+ * BIOS Information
+ * Vendor: American Megatrends Inc.
+ * Version: WL10R104
+ * Release Date: 09/12/2019
+ * BIOS Revision: 5.13
+ *
+ * Base Board Information
+ * Manufacturer: Maxtang
+ * Product Name: WL10
+ * Version: V1.0
+ */
+
+#include <board.h>
+#include <acrn_common.h>
+#include <msr.h>
+
+struct platform_clos_info platform_clos_array[0];
+uint16_t platform_clos_num = 0;
+
+static const struct cpu_cx_data board_cpu_cx[3] = {
+	{{SPACE_FFixedHW, 0x01U, 0x02U, 0x01U, 0x00UL}, 0x01U, 0x01U, 0x00U},	/* C1 */
+	{{SPACE_FFixedHW, 0x01U, 0x02U, 0x01U, 0x33UL}, 0x02U, 0x97U, 0x00U},	/* C2 */
+	{{SPACE_FFixedHW, 0x01U, 0x02U, 0x01U, 0x60UL}, 0x03U, 0x40AU, 0x00U},	/* C3 */
+};
+
+static const struct cpu_px_data board_cpu_px[10] = {
+	{0x835UL, 0x00UL, 0x0AUL, 0x0AUL, 0x002E00UL, 0x002E00UL},	/* P0 */
+	{0x834UL, 0x00UL, 0x0AUL, 0x0AUL, 0x001500UL, 0x001500UL},	/* P1 */
+	{0x7D0UL, 0x00UL, 0x0AUL, 0x0AUL, 0x001400UL, 0x001400UL},	/* P2 */
+	{0x76CUL, 0x00UL, 0x0AUL, 0x0AUL, 0x001300UL, 0x001300UL},	/* P3 */
+	{0x708UL, 0x00UL, 0x0AUL, 0x0AUL, 0x001200UL, 0x001200UL},	/* P4 */
+	{0x6A4UL, 0x00UL, 0x0AUL, 0x0AUL, 0x001100UL, 0x001100UL},	/* P5 */
+	{0x640UL, 0x00UL, 0x0AUL, 0x0AUL, 0x001000UL, 0x001000UL},	/* P6 */
+	{0x5DCUL, 0x00UL, 0x0AUL, 0x0AUL, 0x000F00UL, 0x000F00UL},	/* P7 */
+	{0x578UL, 0x00UL, 0x0AUL, 0x0AUL, 0x000E00UL, 0x000E00UL},	/* P8 */
+	{0x514UL, 0x00UL, 0x0AUL, 0x0AUL, 0x000D00UL, 0x000D00UL},	/* P9 */
+};
+
+const struct cpu_state_table board_cpu_state_tbl = {
+	"Intel(R) Core(TM) i7-8565U CPU @ 1.80GHz",
+	{(uint8_t)ARRAY_SIZE(board_cpu_px), board_cpu_px,
+	(uint8_t)ARRAY_SIZE(board_cpu_cx), board_cpu_cx}
+};
diff --git a/hypervisor/arch/x86/configs/whl-ipc-i7/misc_cfg.h b/hypervisor/arch/x86/configs/whl-ipc-i7/misc_cfg.h
new file mode 100644
index 000000000..1c46518b6
--- /dev/null
+++ b/hypervisor/arch/x86/configs/whl-ipc-i7/misc_cfg.h
@@ -0,0 +1,35 @@
+/*
+ * Copyright (C) 2019 Intel Corporation. All rights reserved.
+ *
+ * SPDX-License-Identifier: BSD-3-Clause
+ */
+
+
+#ifndef MISC_CFG_H
+#define MISC_CFG_H
+
+#define CONFIG_MAX_PCPU_NUM	4U
+#define ROOTFS_0		"root=/dev/nvme0n1p3 "
+#define ROOTFS_1		"root=/dev/sda3 "
+
+#define SOS_ROOTFS		"root=/dev/sda3 "
+#define SOS_CONSOLE		"console=ttyS0 "
+#define SOS_COM1_BASE		0x3F8U
+#define SOS_COM1_IRQ		4U
+#define SOS_COM2_BASE		0x2F8U
+#define SOS_COM2_IRQ		3U
+
+#define SOS_BOOTARGS_DIFF	"rw " \
+				"rootwait "	\
+				"console=tty0 "	\
+				"consoleblank=0 "	\
+				"no_timer_check "	\
+				"quiet "	\
+				"loglevel=3 "	\
+				"i915.nuclear_pageflip=1 "	\
+				"i915.avail_planes_per_pipe=0x01010F "	\
+				"i915.domain_plane_owners=0x011111110000 "	\
+				"i915.enable_gvt=1 "	\
+				"hvlog=2M@0x1fe00000 "	\
+				"memmap=0x200000$0x1fe00000"
+#endif /* MISC_CFG_H */
diff --git a/hypervisor/arch/x86/configs/whl-ipc-i7/pci_devices.h b/hypervisor/arch/x86/configs/whl-ipc-i7/pci_devices.h
new file mode 100644
index 000000000..90981f624
--- /dev/null
+++ b/hypervisor/arch/x86/configs/whl-ipc-i7/pci_devices.h
@@ -0,0 +1,63 @@
+/*
+ * Copyright (C) 2019 Intel Corporation. All rights reserved.
+ *
+ * SPDX-License-Identifier: BSD-3-Clause
+ */
+
+/*
+ * BIOS Information
+ * Vendor: American Megatrends Inc.
+ * Version: WL10R104
+ * Release Date: 09/12/2019
+ * BIOS Revision: 5.13
+ *
+ * Base Board Information
+ * Manufacturer: Maxtang
+ * Product Name: WL10
+ * Version: V1.0
+ */
+
+#ifndef PCI_DEVICES_H_
+#define PCI_DEVICES_H_
+
+#define HOST_BRIDGE                             .pbdf.bits = {.b = 0x00U, .d = 0x00U, .f = 0x00U}
+#define VGA_COMPATIBLE_CONTROLLER_0             .pbdf.bits = {.b = 0x00U, .d = 0x02U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa0000000UL, \
+                                                .vbar_base[2] = 0x90000000UL
+#define SIGNAL_PROCESSING_CONTROLLER_0          .pbdf.bits = {.b = 0x00U, .d = 0x12U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa141e000UL
+#define USB_CONTROLLER_0                        .pbdf.bits = {.b = 0x00U, .d = 0x14U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa1400000UL
+#define RAM_MEMORY_0                            .pbdf.bits = {.b = 0x00U, .d = 0x14U, .f = 0x02U}, \
+                                                .vbar_base[0] = 0xa1416000UL, \
+                                                .vbar_base[2] = 0xa141d000UL
+#define COMMUNICATION_CONTROLLER_0              .pbdf.bits = {.b = 0x00U, .d = 0x16U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa141c000UL
+#define SATA_CONTROLLER_0                       .pbdf.bits = {.b = 0x00U, .d = 0x17U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa1414000UL, \
+                                                .vbar_base[1] = 0xa141b000UL, \
+                                                .vbar_base[5] = 0xa141a000UL
+#define SD_HOST_CONTROLLER_0                    .pbdf.bits = {.b = 0x00U, .d = 0x1AU, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa1419000UL
+#define PCI_BRIDGE_0                            .pbdf.bits = {.b = 0x00U, .d = 0x1CU, .f = 0x00U}
+#define PCI_BRIDGE_1                            .pbdf.bits = {.b = 0x00U, .d = 0x1CU, .f = 0x04U}
+#define PCI_BRIDGE_2                            .pbdf.bits = {.b = 0x00U, .d = 0x1DU, .f = 0x00U}
+#define PCI_BRIDGE_3                            .pbdf.bits = {.b = 0x00U, .d = 0x1DU, .f = 0x01U}
+#define ISA_BRIDGE_0                            .pbdf.bits = {.b = 0x00U, .d = 0x1FU, .f = 0x00U}
+#define AUDIO_DEVICE_0                          .pbdf.bits = {.b = 0x00U, .d = 0x1FU, .f = 0x03U}, \
+                                                .vbar_base[0] = 0xa1410000UL, \
+                                                .vbar_base[4] = 0xa1000000UL
+#define SMBUS_0                                 .pbdf.bits = {.b = 0x00U, .d = 0x1FU, .f = 0x04U}, \
+                                                .vbar_base[0] = 0xa1418000UL
+#define SERIAL_BUS_CONTROLLER_0                 .pbdf.bits = {.b = 0x00U, .d = 0x1FU, .f = 0x05U}, \
+                                                .vbar_base[0] = 0xfe010000UL
+#define NON_VOLATILE_MEMORY_CONTROLLER_0        .pbdf.bits = {.b = 0x02U, .d = 0x00U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa1300000UL
+#define ETHERNET_CONTROLLER_0                   .pbdf.bits = {.b = 0x03U, .d = 0x00U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa1200000UL, \
+                                                .vbar_base[3] = 0xa1220000UL
+#define ETHERNET_CONTROLLER_1                   .pbdf.bits = {.b = 0x04U, .d = 0x00U, .f = 0x00U}, \
+                                                .vbar_base[0] = 0xa1100000UL, \
+                                                .vbar_base[3] = 0xa1120000UL
+
+#endif /* PCI_DEVICES_H_ */
diff --git a/hypervisor/arch/x86/configs/whl-ipc-i7/ve820.c b/hypervisor/arch/x86/configs/whl-ipc-i7/ve820.c
new file mode 100644
index 000000000..2d0e18a8a
--- /dev/null
+++ b/hypervisor/arch/x86/configs/whl-ipc-i7/ve820.c
@@ -0,0 +1,16 @@
+/*
+ * Copyright (C) 2019 Intel Corporation. All rights reserved.
+ *
+ * SPDX-License-Identifier: BSD-3-Clause
+ */
+
+#include <e820.h>
+#include <vm.h>
+/**
+ * @pre vm != NULL
+*/
+void create_prelaunched_vm_e820(struct acrn_vm *vm)
+{
+	vm->e820_entry_num = 0;
+	vm->e820_entries = NULL;
+}
diff --git a/hypervisor/arch/x86/configs/whl-ipc-i7/whl-ipc-i7_acpi_info.h b/hypervisor/arch/x86/configs/whl-ipc-i7/whl-ipc-i7_acpi_info.h
new file mode 100644
index 000000000..f6416d405
--- /dev/null
+++ b/hypervisor/arch/x86/configs/whl-ipc-i7/whl-ipc-i7_acpi_info.h
@@ -0,0 +1,103 @@
+/*
+ * Copyright (C) 2019 Intel Corporation. All rights reserved.
+ *
+ * SPDX-License-Identifier: BSD-3-Clause
+ */
+
+/* DO NOT MODIFY THIS FILE UNLESS YOU KNOW WHAT YOU ARE DOING!
+ */
+
+#ifndef PLATFORM_ACPI_INFO_H
+#define PLATFORM_ACPI_INFO_H
+
+/*
+ * BIOS Information
+ * Vendor: American Megatrends Inc.
+ * Version: WL10R104
+ * Release Date: 09/12/2019
+ * BIOS Revision: 5.13
+ *
+ * Base Board Information
+ * Manufacturer: Maxtang
+ * Product Name: WL10
+ * Version: V1.0
+ */
+
+/* pm sstate data */
+#define PM1A_EVT_ADDRESS        0x1800UL
+#define PM1A_EVT_ACCESS_SIZE    0x2U
+#define PM1A_CNT_ADDRESS        0x1804UL
+	/* S3 is not supported by BIOS */
+
+#undef S3_PKG_VAL_PM1A
+#define S3_PKG_VAL_PM1A         0x0U
+
+#define WAKE_VECTOR_32          0x8C8AA08CUL
+#define WAKE_VECTOR_64          0x8C8AA098UL
+
+#define RESET_REGISTER_ADDRESS  0xCF9UL
+#define RESET_REGISTER_SPACE_ID SPACE_SYSTEM_IO
+#define RESET_REGISTER_VALUE    0x6U
+
+/* DRHD of DMAR */
+
+#define DRHD_COUNT              2U
+
+#define DRHD0_DEV_CNT           1U
+#define DRHD0_SEGMENT           0U
+#define DRHD0_FLAGS             0U
+#define DRHD0_REG_BASE          0xFED90000UL
+#define DRHD0_IGNORE            true
+#define DRHD0_DEVSCOPE0_BUS     0x0U
+#define DRHD0_DEVSCOPE0_PATH    0x10U
+#define DRHD0_DEVSCOPE1_BUS     0x0U
+#define DRHD0_DEVSCOPE1_PATH    0x0U
+#define DRHD0_DEVSCOPE2_BUS     0x0U
+#define DRHD0_DEVSCOPE2_PATH    0x0U
+#define DRHD0_DEVSCOPE3_BUS     0x0U
+#define DRHD0_DEVSCOPE3_PATH    0x0U
+
+#define DRHD1_DEV_CNT           2U
+#define DRHD1_SEGMENT           0U
+#define DRHD1_FLAGS             1U
+#define DRHD1_REG_BASE          0xFED91000UL
+#define DRHD1_IGNORE            false
+#define DRHD1_DEVSCOPE0_BUS     0x0U
+#define DRHD1_DEVSCOPE0_PATH    0xf7U
+#define DRHD1_DEVSCOPE1_BUS     0x0U
+#define DRHD1_DEVSCOPE1_PATH    0xf6U
+#define DRHD1_DEVSCOPE2_BUS     0x0U
+#define DRHD1_DEVSCOPE2_PATH    0x0U
+#define DRHD1_DEVSCOPE3_BUS     0x0U
+#define DRHD1_DEVSCOPE3_PATH    0x0U
+#define DRHD1_IOAPIC_ID         2U
+
+#define DRHD2_DEV_CNT           0U
+#define DRHD2_SEGMENT           0U
+#define DRHD2_FLAGS             0U
+#define DRHD2_REG_BASE          0x00UL
+#define DRHD2_IGNORE            false
+#define DRHD2_DEVSCOPE0_BUS     0x0U
+#define DRHD2_DEVSCOPE0_PATH    0x0U
+#define DRHD2_DEVSCOPE1_BUS     0x0U
+#define DRHD2_DEVSCOPE1_PATH    0x0U
+#define DRHD2_DEVSCOPE2_BUS     0x0U
+#define DRHD2_DEVSCOPE2_PATH    0x0U
+#define DRHD2_DEVSCOPE3_BUS     0x0U
+#define DRHD2_DEVSCOPE3_PATH    0x0U
+
+#define DRHD3_DEV_CNT           0U
+#define DRHD3_SEGMENT           0U
+#define DRHD3_FLAGS             0U
+#define DRHD3_REG_BASE          0x00UL
+#define DRHD3_IGNORE            false
+#define DRHD3_DEVSCOPE0_BUS     0x0U
+#define DRHD3_DEVSCOPE0_PATH    0x0U
+#define DRHD3_DEVSCOPE1_BUS     0x0U
+#define DRHD3_DEVSCOPE1_PATH    0x0U
+#define DRHD3_DEVSCOPE2_BUS     0x0U
+#define DRHD3_DEVSCOPE2_PATH    0x0U
+#define DRHD3_DEVSCOPE3_BUS     0x0U
+#define DRHD3_DEVSCOPE3_PATH    0x0U
+
+#endif /* PLATFORM_ACPI_INFO_H */
-- 
2.17.1

